<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punto Celular | Tienda Oficial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Roboto', sans-serif; }
        h1, h2, h3, .font-montserrat { font-family: 'Montserrat', sans-serif; }
        .bg-punto-red { background-color: #E61E2A; }
        .text-punto-red { color: #E61E2A; }
        .hover-bg-red:hover { background-color: #C11822; }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(37, 211, 102, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }
        .whatsapp-btn { animation: pulse 2s infinite; }
        
        .cart-sidebar {
            transition: transform 0.3s ease-in-out;
            transform: translateX(100%);
        }
        .cart-sidebar.open { transform: translateX(0); }
    </style>
</head>
<body class="bg-white text-black">

    <!-- Header -->
    <header class="fixed w-full z-50 bg-white/95 backdrop-blur-sm border-b border-gray-100 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 h-20 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-10 h-10 bg-punto-red rounded-lg flex items-center justify-center">
                    <i data-lucide="smartphone" class="text-white"></i>
                </div>
                <span class="text-2xl font-bold tracking-tighter uppercase">Punto <span class="text-punto-red">Celular</span></span>
            </div>
            <div class="flex items-center gap-4">
                <button onclick="toggleCart()" class="relative p-2 hover:bg-gray-100 rounded-full transition-colors">
                    <i data-lucide="shopping-bag" class="w-6 h-6"></i>
                    <span id="cart-count" class="absolute -top-1 -right-1 bg-punto-red text-white text-[10px] font-bold w-5 h-5 flex items-center justify-center rounded-full">0</span>
                </button>
                <a href="https://maps.app.goo.gl/8B7idxKurygfZhw39" target="_blank" class="hidden md:flex items-center gap-2 bg-black text-white px-5 py-2 rounded-full font-medium hover:bg-gray-800 transition-colors">
                    <i data-lucide="map-pin" class="w-4 h-4 text-punto-red"></i>
                    Tienda F√≠sica
                </a>
            </div>
        </div>
    </header>

    <!-- Hero -->
    <section class="pt-32 pb-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-6 italic">TU TECNOLOG√çA AL <span class="text-punto-red">SIGUIENTE NIVEL</span></h1>
            <p class="text-gray-600 text-lg max-w-2xl mx-auto">Explora nuestro cat√°logo de accesorios premium y personaliza tu smartphone con la mejor protecci√≥n y estilo.</p>
        </div>
    </section>

    <!-- Productos -->
    <section class="py-12 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between mb-10">
                <h2 class="text-3xl font-bold">Nuestros Productos</h2>
                <div class="h-1 flex-grow mx-6 bg-gray-200 hidden md:block"></div>
            </div>
            
            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                <!-- Los productos se cargan v√≠a JavaScript -->
            </div>
        </div>
    </section>

    <!-- Secci√≥n de Pago y Ubicaci√≥n (Footer informativo) -->
    <section class="py-20 bg-white border-t">
        <div class="max-w-7xl mx-auto px-4 grid md:grid-cols-2 gap-12">
            <div class="bg-gray-50 p-8 rounded-3xl">
                <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                    <i data-lucide="landmark" class="text-punto-red"></i> Datos de Pago
                </h3>
                <div class="space-y-4 text-gray-700">
                    <div class="p-4 bg-white rounded-xl border border-gray-200">
                        <p class="text-sm text-gray-500 uppercase font-bold">Banco Pichincha</p>
                        <p class="text-lg font-bold">Cuenta Ahorros: 2201234567</p>
                        <p class="text-sm">Titular: Punto Celular S.A.</p>
                        <p class="text-sm italic">CI: 1700000000</p>
                    </div>
                    <div class="p-4 bg-white rounded-xl border border-gray-200">
                        <p class="text-sm text-gray-500 uppercase font-bold">Banco Guayaquil</p>
                        <p class="text-lg font-bold">Cuenta Corriente: 10987654</p>
                        <p class="text-sm">Titular: Punto Celular S.A.</p>
                    </div>
                </div>
            </div>
            <div class="flex flex-col justify-center">
                <h3 class="text-2xl font-bold mb-6 italic">¬øLISTO PARA TU PEDIDO?</h3>
                <p class="text-gray-600 mb-8 text-lg">Agrega tus productos favoritos al carrito, selecciona tu m√©todo de entrega y env√≠anos el pedido por WhatsApp. ¬°Te responderemos en minutos!</p>
                <div class="flex gap-4">
                    <a href="https://www.facebook.com/profile.php?id=61581921847853" target="_blank" class="flex items-center gap-2 text-blue-600 font-bold hover:underline">
                        <i data-lucide="facebook"></i> S√≠guenos en Facebook
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Carrito Sidebar -->
    <div id="cart-sidebar" class="cart-sidebar fixed top-0 right-0 h-full w-full md:w-[450px] bg-white z-[100] shadow-2xl flex flex-col">
        <div class="p-6 border-b flex items-center justify-between bg-black text-white">
            <h2 class="text-xl font-bold flex items-center gap-2">
                <i data-lucide="shopping-cart"></i> Mi Carrito
            </h2>
            <button onclick="toggleCart()" class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                <i data-lucide="x"></i>
            </button>
        </div>

        <div id="cart-items" class="flex-grow overflow-y-auto p-6 space-y-4">
            <!-- Items del carrito -->
            <p class="text-center text-gray-500 mt-10">Tu carrito est√° vac√≠o.</p>
        </div>

        <div class="p-6 border-t bg-gray-50">
            <!-- M√©todo de entrega -->
            <div class="mb-6">
                <p class="font-bold mb-3">M√©todo de entrega:</p>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="setDelivery('domicilio')" id="btn-domicilio" class="p-3 border-2 border-punto-red bg-white text-punto-red rounded-xl font-bold text-sm flex flex-col items-center gap-1 transition-all">
                        <i data-lucide="truck" class="w-5 h-5"></i> A domicilio
                    </button>
                    <button onclick="setDelivery('tienda')" id="btn-tienda" class="p-3 border-2 border-gray-200 bg-white text-gray-400 rounded-xl font-bold text-sm flex flex-col items-center gap-1 transition-all">
                        <i data-lucide="store" class="w-5 h-5"></i> Retiro en tienda
                    </button>
                </div>
            </div>

            <!-- Bot√≥n Ubicaci√≥n -->
            <div id="location-container" class="mb-6">
                <button onclick="getLocation()" id="btn-location" class="w-full py-3 bg-black text-white rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-gray-800 transition-all">
                    <i data-lucide="map-pin" class="w-5 h-5 text-punto-red"></i>
                    <span id="location-text">Obtener mi ubicaci√≥n actual</span>
                </button>
            </div>

            <div class="flex justify-between items-center mb-6">
                <span class="text-gray-600 font-medium text-lg">Total a pagar:</span>
                <span id="cart-total" class="text-3xl font-bold text-punto-red">$0.00</span>
            </div>

            <button onclick="checkout()" class="w-full py-4 bg-punto-red text-white rounded-2xl font-bold text-lg hover-bg-red transition-all shadow-xl flex items-center justify-center gap-3">
                <i data-lucide="send"></i>
                PEDIR POR WHATSAPP
            </button>
        </div>
    </div>

    <!-- Overlay Carrito -->
    <div id="cart-overlay" onclick="toggleCart()" class="fixed inset-0 bg-black/50 z-[90] hidden backdrop-blur-sm"></div>

    <script>
        const products = [
            { id: 1, name: "Case Impact Pro Red", price: 15.00, img: "https://images.unsplash.com/photo-1541873676947-d3493864ee0b?auto=format&fit=crop&q=80&w=200", category: "Protecci√≥n" },
            { id: 2, name: "Cargador 25W Fast", price: 25.00, img: "https://images.unsplash.com/photo-1583863788434-e58a36330cf0?auto=format&fit=crop&q=80&w=200", category: "Energ√≠a" },
            { id: 3, name: "Protector Cer√°mico HD", price: 10.00, img: "https://images.unsplash.com/photo-1616348436168-de43ad0db179?auto=format&fit=crop&q=80&w=200", category: "Protecci√≥n" },
            { id: 4, name: "Cable USB-C Reforzado", price: 8.50, img: "https://images.unsplash.com/photo-1588156979435-379b9d802b0a?auto=format&fit=crop&q=80&w=200", category: "Energ√≠a" },
            { id: 5, name: "Aud√≠fonos Air Bass", price: 35.00, img: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&q=80&w=200", category: "Audio" },
            { id: 6, name: "Soporte Auto Magn√©tico", price: 12.00, img: "https://images.unsplash.com/photo-1629131726692-1accd0c53ce0?auto=format&fit=crop&q=80&w=200", category: "Accesorios" },
            { id: 7, name: "Aro de Luz 10 Pulgadas", price: 20.00, img: "https://images.unsplash.com/photo-1590602847861-f357a9332bbc?auto=format&fit=crop&q=80&w=200", category: "Streaming" },
            { id: 8, name: "Case Transparente Magsafe", price: 18.00, img: "https://images.unsplash.com/photo-1603302576837-37561b2e2302?auto=format&fit=crop&q=80&w=200", category: "Protecci√≥n" },
            { id: 9, name: "PowerBank 10,000mAh", price: 30.00, img: "https://images.unsplash.com/photo-1609592424089-9833f208ce8a?auto=format&fit=crop&q=80&w=200", category: "Energ√≠a" },
            { id: 10, name: "Adaptador OTG Premium", price: 5.00, img: "https://images.unsplash.com/photo-1585338107529-13afc5f02586?auto=format&fit=crop&q=80&w=200", category: "Accesorios" }
        ];

        let cart = [];
        let deliveryMethod = 'domicilio';
        let userLocation = '';

        function renderProducts() {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = products.map(p => `
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all group">
                    <div class="h-48 overflow-hidden bg-gray-100">
                        <img src="${p.img}" alt="${p.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                    </div>
                    <div class="p-4">
                        <span class="text-[10px] uppercase font-bold text-gray-400 tracking-widest">${p.category}</span>
                        <h3 class="font-bold text-sm mb-2 h-10 line-clamp-2">${p.name}</h3>
                        <div class="flex items-center justify-between mt-4">
                            <span class="text-punto-red font-bold text-lg">$${p.price.toFixed(2)}</span>
                            <div class="flex items-center bg-gray-50 rounded-lg p-1">
                                <button onclick="updateQty(${p.id}, -1)" class="w-8 h-8 flex items-center justify-center hover:bg-gray-200 rounded-md transition-colors">-</button>
                                <span id="qty-${p.id}" class="w-8 text-center font-bold text-xs">0</span>
                                <button onclick="updateQty(${p.id}, 1)" class="w-8 h-8 flex items-center justify-center hover:bg-gray-200 rounded-md transition-colors text-punto-red">+</button>
                            </div>
                        </div>
                        <button onclick="addToCart(${p.id})" class="w-full mt-4 bg-black text-white py-2 rounded-lg text-xs font-bold hover:bg-gray-800 transition-colors">
                            AGREGAR AL CARRITO
                        </button>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function updateQty(id, delta) {
            const el = document.getElementById(`qty-${id}`);
            let val = parseInt(el.innerText) + delta;
            if (val < 0) val = 0;
            el.innerText = val;
        }

        function addToCart(id) {
            const qty = parseInt(document.getElementById(`qty-${id}`).innerText);
            if (qty === 0) return;
            
            const product = products.find(p => p.id === id);
            const existing = cart.find(item => item.id === id);
            
            if (existing) {
                existing.qty += qty;
            } else {
                cart.push({ ...product, qty });
            }
            
            document.getElementById(`qty-${id}`).innerText = 0;
            updateCartUI();
            // Abrir carrito autom√°ticamente al agregar
            if (!document.getElementById('cart-sidebar').classList.contains('open')) {
                toggleCart();
            }
        }

        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartUI();
        }

        function updateCartUI() {
            const container = document.getElementById('cart-items');
            const countEl = document.getElementById('cart-count');
            const totalEl = document.getElementById('cart-total');
            
            if (cart.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500 mt-10">Tu carrito est√° vac√≠o.</p>';
                countEl.innerText = 0;
                totalEl.innerText = '$0.00';
                return;
            }

            let total = 0;
            let count = 0;
            
            container.innerHTML = cart.map(item => {
                const subtotal = item.price * item.qty;
                total += subtotal;
                count += item.qty;
                return `
                    <div class="flex gap-4 bg-gray-50 p-4 rounded-xl items-center">
                        <img src="${item.img}" class="w-16 h-16 rounded-lg object-cover">
                        <div class="flex-grow">
                            <h4 class="font-bold text-sm leading-tight">${item.name}</h4>
                            <p class="text-punto-red font-bold">$${item.price.toFixed(2)} x ${item.qty}</p>
                        </div>
                        <button onclick="removeFromCart(${item.id})" class="text-gray-400 hover:text-red-500">
                            <i data-lucide="trash-2" class="w-5 h-5"></i>
                        </button>
                    </div>
                `;
            }).join('');
            
            countEl.innerText = count;
            totalEl.innerText = `$${total.toFixed(2)}`;
            lucide.createIcons();
        }

        function toggleCart() {
            document.getElementById('cart-sidebar').classList.toggle('open');
            document.getElementById('cart-overlay').classList.toggle('hidden');
        }

        function setDelivery(method) {
            deliveryMethod = method;
            const btnD = document.getElementById('btn-domicilio');
            const btnT = document.getElementById('btn-tienda');
            const locCon = document.getElementById('location-container');

            if (method === 'domicilio') {
                btnD.classList.add('border-punto-red', 'text-punto-red');
                btnD.classList.remove('border-gray-200', 'text-gray-400');
                btnT.classList.add('border-gray-200', 'text-gray-400');
                btnT.classList.remove('border-punto-red', 'text-punto-red');
                locCon.classList.remove('hidden');
            } else {
                btnT.classList.add('border-punto-red', 'text-punto-red');
                btnT.classList.remove('border-gray-200', 'text-gray-400');
                btnD.classList.add('border-gray-200', 'text-gray-400');
                btnD.classList.remove('border-punto-red', 'text-punto-red');
                locCon.classList.add('hidden');
            }
        }

        function getLocation() {
            const btn = document.getElementById('btn-location');
            const text = document.getElementById('location-text');
            
            if (!navigator.geolocation) {
                alert("La geolocalizaci√≥n no es soportada por tu navegador.");
                return;
            }

            text.innerText = "Localizando...";
            btn.classList.add('opacity-50');

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    userLocation = `https://www.google.com/maps?q=${lat},${lng}`;
                    text.innerText = "üìç Ubicaci√≥n Cargada Correctamente";
                    btn.classList.remove('opacity-50');
                    btn.classList.add('bg-green-600');
                },
                (error) => {
                    text.innerText = "Error al obtener ubicaci√≥n";
                    btn.classList.remove('opacity-50', 'bg-black');
                    btn.classList.add('bg-orange-500');
                    console.error(error);
                }
            );
        }

        function checkout() {
            if (cart.length === 0) {
                alert("Tu carrito est√° vac√≠o.");
                return;
            }

            if (deliveryMethod === 'domicilio' && !userLocation) {
                alert("Por favor, carga tu ubicaci√≥n para el env√≠o a domicilio.");
                return;
            }

            let message = `üöÄ *NUEVO PEDIDO - PUNTO CELULAR*\n\n`;
            message += `*PRODUCTOS:*\n`;
            
            cart.forEach(item => {
                message += `- ${item.qty}x ${item.name} ($${(item.price * item.qty).toFixed(2)})\n`;
            });

            const total = cart.reduce((acc, item) => acc + (item.price * item.qty), 0);
            message += `\nüí∞ *TOTAL:* $${total.toFixed(2)}\n`;
            message += `\nüì¶ *M√âTODO:* ${deliveryMethod === 'domicilio' ? 'Env√≠o a Domicilio' : 'Retiro en Tienda'}\n`;
            
            if (deliveryMethod === 'domicilio') {
                message += `üìç *UBICACI√ìN:* ${userLocation}\n`;
            }

            message += `\nüí≥ *PAGO:* Transferencia Bancaria\n`;
            message += `\n_Vengo desde la p√°gina web y quiero confirmar este pedido._`;

            const encodedMsg = encodeURIComponent(message);
            window.open(`https://wa.me/593987201563?text=${encodedMsg}`, '_blank');
        }

        // Init
        window.onload = () => {
            renderProducts();
            lucide.createIcons();
        }
    </script>
</body>
</html>
